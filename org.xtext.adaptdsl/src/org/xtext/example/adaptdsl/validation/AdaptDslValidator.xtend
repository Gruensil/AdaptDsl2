/*
 * generated by Xtext 2.10.0
 */
package org.xtext.example.adaptdsl.validation

import org.eclipse.xtext.validation.Check
import org.xtext.example.adaptdsl.adaptDsl.Model
import org.xtext.example.adaptdsl.adaptDsl.AdaptDslPackage

/**
 * This class contains custom validation rules. 
 *
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class AdaptDslValidator extends AbstractAdaptDslValidator {
	
	@Check
	def void isServiceDefined(Model model) {
		
		//Loop trough all Defined Providers for all Provides mentioned in the Attributes an compare
		for(ent: model.getEntity()){
			for(attr: ent.getProperty()){
				var defined = false;
				for(prov: model.getProvider()){
					if(attr.getProvider().getName() == prov.getName()){
						//the Provider is defined
						defined = true;
					}
				}
				if(!defined){
					error('One of the Providers is not listed or misspelled.', AdaptDslPackage$Literals::MODEL__PROVIDER);
				}
			}
		}
	}	
	
}
